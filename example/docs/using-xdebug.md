# Using Xdebug

## Getting started

Xdebug is currently setup to not start automatically. Instead you can activate the debugger by using bookmarks or a browser extension.

[JetBrains Xdebug bookmarks](https://www.jetbrains.com/phpstorm/marklets/)


## Docker ENV

Prior to actually debugging your code you may need to set some values in your `.docker.ev` file.

### Mac

Set `XDEBUG_REMOTE_HOST=host.docker.internal`

### Windows

If you're running the Docker version for Windows 10 Home edition which requires running Docker in a VM you may have to get the remote host ip using `ipconfig`.

Once you have your IP address you may add it to `XDEBUG_REMOTE_HOST` in the `.docker.env` file.

```bash
$ ipconfig
```

Output:

```bash
Ethernet adapter Ethernet:

   Media State . . . . . . . . . . . : Media disconnected
   Connection-specific DNS Suffix  . :

Ethernet adapter VirtualBox Host-Only Network:

   Connection-specific DNS Suffix  . :
   IPv4 Address. . . . . . . . . . . : <your-remote-host-ip>
```

### Windows WSL2

First, you will need to determine the IP to use for `xdebug.remote_host`. You can do this by running `cat /etc/resolv.conf`
inside the wsl2 terminal.

```bash
cat /etc/resolv.conf
```

It should display something like the following below.

```bash
# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:
# [network]
# generateResolvConf = false
nameserver <your-remote-host-ip>
```

Copy `<your-remote-host-ip>` to `.docker.env`.

### Linux

TBA


## Editor/IDE setup

### Via Visual Studio Code

```json
{
    "version": "0.2.0",
    "configurations": [
    
        {
            "name": "Listen for XDebug",
            "type": "php",
            "request": "launch",
            "port": 9000,
            "pathMappings": {
                "/var/www/html": "${workspaceRoot}/example",
                "/var/www/html/public": "${workspaceRoot}/example/public"
            }
        }
    ]
}
```
